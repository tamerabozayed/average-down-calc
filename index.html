<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø­Ø§Ø³Ø¨Ø© ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù…ØªÙˆØ³Ø·</title>
  <style>
    /* ğŸ§± Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
    :root {
      --main-color: #0a66c2;
      --bg-color: #f5f7fa;
      --text-color: #222;
      --card-bg: #fff;
      --btn-bg: #0a66c2;
      --btn-text: #fff;
    }
    body.dark {
      --bg-color: #1e1e1e;
      --text-color: #fff;
      --card-bg: #2c2c2c;
      --btn-bg: #0d84ff;
      --btn-text: #fff;
    }

    /* ğŸŒ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© */
    body {
      font-family: "Cairo", sans-serif;
      margin: 0;
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: 0.3s;
    }

    header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      background: var(--main-color);
      color: white;
      padding: 10px 20px;
    }
    header .title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: bold;
    }
    header img {
      width: 30px;
      height: 30px;
    }
    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    nav button {
      background: transparent;
      color: white;
      border: none;
      font-size: 15px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }
    nav button:hover {
      text-decoration: underline;
    }

    /* ğŸ“± Ø§Ù„Ø­Ø§Ø³Ø¨Ø© */
    .calculator {
      background: var(--card-bg);
      margin: 30px auto;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 90%;
      max-width: 360px;
      transition: 0.3s;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 5px;
      text-align: center;
      font-size: 15px;
    }
    .btns {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      gap: 10px;
    }
    button.action {
      flex: 1;
      padding: 10px;
      background-color: var(--btn-bg);
      color: var(--btn-text);
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    .result {
      margin-top: 20px;
      font-size: 18px;
      text-align: center;
      color: var(--main-color);
      font-weight: bold;
    }

    footer {
      text-align: center;
      padding: 15px;
      background: var(--main-color);
      color: white;
      margin-top: 40px;
      font-size: 14px;
    }

    /* Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    .modal-content {
      background: var(--card-bg);
      color: var(--text-color);
      padding: 20px;
      border-radius: 10px;
      width: 85%;
      max-width: 320px;
      text-align: center;
      position: relative;
    }
    .modal-content .closeBtn {
      position: absolute;
      top: 10px;
      right: 15px;
      background: transparent;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: var(--text-color);
    }
    .modal-content button {
      background: var(--main-color);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      margin-top: 15px;
      cursor: pointer;
      font-size: 14px;
    }

    /* Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background: var(--card-bg);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      border-radius: 6px;
      min-width: 100px;
      right: 0;
      z-index: 20;
    }
    .dropdown-content button {
      display: block;
      width: 100%;
      border: none;
      background: transparent;
      padding: 8px;
      text-align: center;
      cursor: pointer;
      color: var(--text-color);
    }
    .dropdown-content button:hover {
      background: #eee;
    }
    .dropdown:hover .dropdown-content {
      display: block;
    }

    @media (max-width: 600px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      nav {
        width: 100%;
        justify-content: space-around;
      }
      .calculator {
        width: 95%;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="title">
      <img src="https://cdn-icons-png.flaticon.com/512/4149/4149670.png" alt="icon">
      <span id="titleText">Ø­Ø§Ø³Ø¨Ø© ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù…ØªÙˆØ³Ø·</span>
    </div>
    <nav>
      <button onclick="openModal('helpModal')">â“ <span id="helpBtn">Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª</span></button>
      <button onclick="openModal('contactModal')">ğŸ’¬ <span id="contactBtn">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</span></button>
      <div class="dropdown">
        <button>ğŸŒ <span id="langBtn">Ø§Ù„Ù„ØºØ©</span></button>
        <div class="dropdown-content">
          <button onclick="changeLang('ar')">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
          <button onclick="changeLang('en')">English</button>
        </div>
      </div>
      <button id="darkToggle" onclick="toggleDark()">ğŸŒ™</button>
    </nav>
  </header>

  <div class="calculator">
    <label id="qLabel">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</label>
    <input type="number" id="Q_old" placeholder="Ù…Ø«Ù„Ø§Ù‹ 100">

    <label id="pOldLabel">Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠ:</label>
    <input type="number" id="P_old" placeholder="Ù…Ø«Ù„Ø§Ù‹ 20" step="0.01">

    <label id="pCurrentLabel">Ø³Ø¹Ø± Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ:</label>
    <input type="number" id="P_current" placeholder="Ù…Ø«Ù„Ø§Ù‹ 15" step="0.01">

    <label id="pTargetLabel">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù:</label>
    <input type="number" id="P_target" placeholder="Ù…Ø«Ù„Ø§Ù‹ 17" step="0.01">

    <div class="btns">
      <button class="action" onclick="calculate()" id="calcBtn">Ø§Ø­Ø³Ø¨</button>
      <button class="action" onclick="resetFields()" id="resetBtn">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
    </div>
    <div class="result" id="result"></div>
  </div>

  <footer>Â© 2025 Ø­Ø§Ø³Ø¨Ø© ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù…ØªÙˆØ³Ø·</footer>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª -->
  <div id="helpModal" class="modal">
    <div class="modal-content">
      <button class="closeBtn" onclick="closeModal('helpModal')">âŒ</button>
      <p id="helpText">
        Ø£Ø¯Ø®Ù„ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨:<br>
        1. Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©.<br>
        2. Ø£Ø¯Ø®Ù„ Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠ.<br>
        3. Ø£Ø¯Ø®Ù„ Ø³Ø¹Ø± Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ.<br>
        4. Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù.<br>
        Ø§Ø¶ØºØ· "Ø§Ø­Ø³Ø¨" Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.<br>
        <b>Ù…Ù„Ø§Ø­Ø¸Ø©:</b> ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ù‚ÙŠÙ… Ø£Ø±Ù‚Ø§Ù… Ù…ÙˆØ¬Ø¨Ø© ÙˆØ£Ù† Ø³Ø¹Ø± Ø§Ù„Ø³ÙˆÙ‚ ÙŠØ®ØªÙ„Ù Ø¹Ù† Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù.
      </p>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙˆØ§ØµÙ„ -->
  <div id="contactModal" class="modal">
    <div class="modal-content">
      <button class="closeBtn" onclick="closeModal('contactModal')">âŒ</button>
      <p id="contactText">
        Ø£Ø¯Ø§Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±ÙŠÙ† ÙÙŠ Ø­Ø³Ø§Ø¨ ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù…ØªÙˆØ³Ø· Ø¨Ø³Ø±Ø¹Ø© ÙˆØ³Ù‡ÙˆÙ„Ø©.<br><br>
        Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© 2025<br><br>
        Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª:
      </p>
      <button id="telegramBtn" onclick="window.open('https://t.me/teto_douglas','_blank')">ğŸ“¨ Ù„Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…</button>
    </div>
  </div>

  <script>
    function calculate() {
      const Q_old = parseFloat(document.getElementById("Q_old").value);
      const P_old = parseFloat(document.getElementById("P_old").value);
      const P_current = parseFloat(document.getElementById("P_current").value);
      const P_target = parseFloat(document.getElementById("P_target").value);
      if (isNaN(Q_old) || isNaN(P_old) || isNaN(P_current) || isNaN(P_target)) {
        document.getElementById("result").innerHTML = "â— ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙŠÙ….";
        return;
      }
      if (P_current === P_target) {
        document.getElementById("result").innerHTML = "âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø³Ø¹Ø± Ø§Ù„Ø³ÙˆÙ‚ Ù…Ø³Ø§ÙˆÙŠÙ‹Ø§ Ù„Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù.";
        return;
      }
      const n = (Q_old * (P_target - P_old)) / (P_current - P_target);
      document.getElementById("result").innerHTML =
        "Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: <br><span style='color:var(--main-color)'>" + n.toFixed(2) + "</span>";
    }

    function resetFields() {
      document.querySelectorAll("input").forEach(i => i.value = "");
      document.getElementById("result").innerHTML = "";
    }

    function openModal(id) {
      document.getElementById(id).style.display = "flex";
    }

    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }

    function toggleDark() {
      document.body.classList.toggle("dark");
      const icon = document.getElementById("darkToggle");
      icon.textContent = document.body.classList.contains("dark") ? "â˜€ï¸" : "ğŸŒ™";
    }

    function changeLang(lang) {
      const isArabic = lang === "ar";
      document.documentElement.lang = lang;
      document.documentElement.dir = isArabic ? "rtl" : "ltr";
      if (isArabic) {
        document.getElementById("titleText").textContent = "Ø­Ø§Ø³Ø¨Ø© ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù…ØªÙˆØ³Ø·";
        document.getElementById("titleText").style.fontFamily = "'Cairo', sans-serif";
        document.getElementById("helpBtn").textContent = "Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª";
        document.getElementById("contactBtn").textContent = "ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§";
        document.getElementById("langBtn").textContent = "Ø§Ù„Ù„ØºØ©";
        document.getElementById("qLabel").textContent = "Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©:";
        document.getElementById("pOldLabel").textContent = "Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠ:";
        document.getElementById("pCurrentLabel").textContent = "Ø³Ø¹Ø± Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ:";
        document.getElementById("pTargetLabel").textContent = "Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù:";
        document.getElementById("calcBtn").textContent = "Ø§Ø­Ø³Ø¨";
        document.getElementById("resetBtn").textContent = "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†";
        document.querySelector("footer").textContent = "Â© 2025 Ø­Ø§Ø³Ø¨Ø© ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù…ØªÙˆØ³Ø·";
        document.getElementById("Q_old").placeholder = "Ù…Ø«Ù„Ø§Ù‹ 100";
        document.getElementById("P_old").placeholder = "Ù…Ø«Ù„Ø§Ù‹ 20";
        document.getElementById("P_current").placeholder = "Ù…Ø«Ù„Ø§Ù‹ 15";
        document.getElementById("P_target").placeholder = "Ù…Ø«Ù„Ø§Ù‹ 17";
        document.getElementById("helpText").innerHTML =
          "Ø£Ø¯Ø®Ù„ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨:<br>1. Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©.<br>2. Ø£Ø¯Ø®Ù„ Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠ.<br>3. Ø£Ø¯Ø®Ù„ Ø³Ø¹Ø± Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ.<br>4. Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù.<br>Ø§Ø¶ØºØ· 'Ø§Ø­Ø³Ø¨' Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.<br><b>Ù…Ù„Ø§Ø­Ø¸Ø©:</b> ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ù‚ÙŠÙ… Ø£Ø±Ù‚Ø§Ù… Ù…ÙˆØ¬Ø¨Ø© ÙˆØ£Ù† Ø³Ø¹Ø± Ø§Ù„Ø³ÙˆÙ‚ ÙŠØ®ØªÙ„Ù Ø¹Ù† Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù.";
        document.getElementById("contactText").innerHTML =
          "Ø£Ø¯Ø§Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±ÙŠÙ† ÙÙŠ Ø­Ø³Ø§Ø¨ ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù…ØªÙˆØ³Ø· Ø¨Ø³Ø±Ø¹Ø© ÙˆØ³Ù‡ÙˆÙ„Ø©.<br><br>Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© 2025<br><br>Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª:";
        document.getElementById("telegramBtn").textContent = "ğŸ“¨ Ù„Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…";
      } else {
        document.getElementById("titleText").textContent = "Average Cost Adjustment Calculator";
        document.getElementById("titleText").style.fontFamily = "'Poppins', sans-serif";
        document.getElementById("helpBtn").textContent = "Help";
        document.getElementById("contactBtn").textContent = "Contact";
        document.getElementById("langBtn").textContent = "Language";
        document.getElementById("qLabel").textContent = "Current Shares:";
        document.getElementById("pOldLabel").textContent = "Current Average Price:";
        document.getElementById("pCurrentLabel").textContent = "Market Price:";
        document.getElementById("pTargetLabel").textContent = "Target Average Price:";
        document.getElementById("calcBtn").textContent = "Calculate";
        document.getElementById("resetBtn").textContent = "Reset";
        document.querySelector("footer").textContent = "Â© 2025 Average Cost Adjustment Calculator";
        document.getElementById("Q_old").placeholder = "e.g. 100";
        document.getElementById("P_old").placeholder = "e.g. 20";
        document.getElementById("P_current").placeholder = "e.g. 15";
        document.getElementById("P_target").placeholder = "e.g. 17";
        document.getElementById("helpText").innerHTML =
          "Enter in order:<br>1. Current shares.<br>2. Current average purchase price.<br>3. Current market price.<br>4. Desired target average price.<br>Click 'Calculate' to get the required additional shares.<br><b>Note:</b> Ensure all values are positive and market price differs from target.";
        document.getElementById("contactText").innerHTML =
          "A simple tool to help investors quickly and easily calculate average cost adjustments.<br><br>Beta Version 2025<br><br>For inquiries and suggestions:";
        document.getElementById("telegramBtn").textContent = "ğŸ“¨ Contact via Telegram";
      }
      document.querySelectorAll(".closeBtn").forEach(btn => btn.textContent = "âŒ");
    }
  </script>
</body>
</html>
